<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>symbol</title>

  <style>

svg {
  display: block;
  background-color: #eee;
  margin: 10px;
  overflow: visible;
}

#grid {
  fill: none;
  stroke-width: 0.02px;
}

#grid1 { stroke: #999; stroke-dasharray: 0.1px; }
#grid2 { stroke: #999; }
#grid3 { stroke: #f00; }

.face {
  fill: rgba(15, 51, 242, 0.6);
}

  </style>
</head>
<body>

  <svg version="1.1" width="0" height="0">
    <defs>
      <g id="grid">
        <path id="grid1" d="
          M0,0 h24 m-24,1 h24 m-24,1 h24 m-24,1 h24 m-24,1 h24
          m-24,1 h24 m-24,1 h24 m-24,1 h24 m-24,1 h24 m-24,1 h24
          m-24,1 h24 m-24,1 h24 m-24,1 h24 m-24,1 h24 m-24,1 h24
          m-24,1 h24 m-24,1 h24 m-24,1 h24 m-24,1 h24 m-24,1 h24
          m-24,1 h24 m-24,1 h24 m-24,1 h24 m-24,1 h24 m-24,1 h24
          M0,0 v24 m1,-24 v24 m1,-24 v24 m1,-24 v24 m1,-24 v24
          m1,-24 v24 m1,-24 v24 m1,-24 v24 m1,-24 v24 m1,-24 v24
          m1,-24 v24 m1,-24 v24 m1,-24 v24 m1,-24 v24 m1,-24 v24
          m1,-24 v24 m1,-24 v24 m1,-24 v24 m1,-24 v24 m1,-24 v24
          m1,-24 v24 m1,-24 v24 m1,-24 v24 m1,-24 v24 m1,-24 v24
          " />
        <path id="grid2" d="
          M0,0 h24 m-24,4 h24 m-24,4 h24 m-24,4 h24 m-24,4 h24
          m-24,4 h24 m-24,4 h24
          M0,0 v24 m4,-24 v24 m4,-24 v24 m4,-24 v24 m4,-24 v24
          m4,-24 v24 m4,-24 v24
          " />
        <path id="grid3" d="
          M0,12 h24 M12,0 v24
          M4,4 h16 v16 h-16 z
          " />
      </g>
    </defs>
  </svg>

  <svg version="1.1" viewBox="0 0 24 24" width="720" height="720">
    <use xlink:href="#grid" x="0" y="0" />

    <polygon id="polygon" points="24,0 0,8 8,11 0,19 5,24 13,16 16,24" class="face"/>

  </svg>

  <textarea id="res"></textarea>

  <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis <span id="anc1">nostrud</span> exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
  <p style="font-size: 24px;">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis <span id="anc2">nostrud</span> exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>

  <script>

window.addEventListener('load', function() {
  var WIDTH = 24, HEIGHT = 24, COLOR = 'coral',

    points = document.getElementById('polygon').getAttribute('points'),
    svgCode =
      '<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="' + WIDTH + '" height="' + HEIGHT + '">' +
      '<polygon points="' + points + '" fill="' + COLOR + '"/>' +
      '</svg>',
    dataUrl =
      // 'url(\'data:image/svg+xml;charset=utf-8,' + encodeURIComponent(decodeURIComponent(svgCode)) + '\')',
      'url(\'data:image/svg+xml;charset=utf-8;base64,' + btoa(unescape(encodeURIComponent(svgCode))) + '\')',
    styles = {
      backgroundImage: dataUrl,
      backgroundPosition: 'right 2px top 2px',
      // Webkit doesn't support rel position
      // backgroundPosition: 'right top',
      backgroundSize: '12px 12px',
      backgroundRepeat: 'no-repeat',
      backgroundColor: '#ececa1',
      paddingRight: '15px'
    };

  document.getElementById('res').value = dataUrl;

  ['anc1', 'anc2'].forEach(function(id) {
    var style = document.getElementById(id).style;
    Object.keys(styles).forEach(function(propName) { style[propName] = styles[propName]; });
  });
}, false);

  </script>

</body>
</html>
